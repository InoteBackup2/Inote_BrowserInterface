<!-- LOGIN FORM -->
<form (ngSubmit)="OnSubmit()" #loginForm="ngForm">

  <!-- EMAIL FIELD -->
  <!-- status informations of input -->
  <div [ngStyle]="(!ref_email.valid && !ref_email.pristine)? {'color':'#dc3545'}:{'color': 'transparent'}">
    Email requis ou invalide
  </div>
  <div class="input-group input-group-sm mb-3 mx-auto">
    <span class="input-group-text" id="inputGroup-sizing-sm">Email</span>
    <input type="text" class="form-control" id="email" aria-describedby="inputGroup-sizing-sm" required autofocus
      pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" [(ngModel)]="this.email" name="email" #ref_email="ngModel" />
  </div>

  <!-- PASSWORD FIELD -->
  <div [ngStyle]="(!ref_pwd.valid && !ref_pwd.pristine)? {'color':'#dc3545'}:{'color': 'transparent'}">
    Mot de passe requis
  </div>
  <div class="input-group input-group-sm  mx-auto">
    <span class="input-group-text" id="inputGroup-sizing-sm">Mot de passe</span>
    <input type="password" class="form-control" id="pwd" aria-describedby="inputGroup-sizing-sm" required
      [(ngModel)]="this.password" name="pwd" #ref_pwd="ngModel" />
  </div>
  <!-- Forgotten password link -->
  <a class="d-flex justify-content-end fst-italic mt-1" data-bs-toggle="modal" data-bs-target="#askActivationCodeModal"
    [ngStyle]="ref_email.valid ? {'text-decoration':'none','color':'white'}:{'color': 'transparent','pointer-events':'none'}">
    Mot de passe perdu ?
  </a>

  <!-- Login button -->
  <div class="d-flex flex-grow-0 justify-content-center">
    <button type="submit" class="mt-2 btn btn-secondary ms-lg-auto border border-white"
      [disabled]="!loginForm.form.valid">
      Se connecter
    </button>
  </div>
</form>

<!-- MODALE -->
<div class="modal fade" id="askActivationCodeModal" tabindex="-1" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body bg-success rounded">

        <!-- Start content of modal -->


        <form (ngSubmit)="OnSubmitChangePwdRequest()" #changePwdRequestForm="ngForm">
          <div class="d-flex flex-column align-items-center">

            <!-- 1- Display button for launch request -->
            <button (click)="onAskingReceiveCode()" [hidden]="this.receivedActivationCode" type="button"
              class="mt-2 btn btn-secondary border border-white">
              Recevoir mon code de changement de mot de passe sur l'adresse <span
                class="text-primary">{{this.email}}</span>
            </button>

            <!-- 2 - Input activation code -->
            <div class="d-flex flex-column align-items-center">
              <div class="input-group input-group-sm mb-3 mx-auto" [hidden]="!this.receivedActivationCode ">
                Entrez le code d'activation (validit√© : 15 mn)
                <span class="input-group-text" id="inputGroup-sizing-sm">Code d'activation</span>
                <input type="text" class="form-control" id="activation" aria-describedby="inputGroup-sizing-sm" required
                  pattern="[0-9]{6}$" [(ngModel)]="this.activationcode" name="activation" #code_activation="ngModel" />
              </div>

              <button type="submit" class="mt-2 btn btn-secondary ms-lg-auto border border-white"
                [disabled]="!code_activation.valid" [hidden]="this.activation_success">
                Envoyer le code
              </button>

            </div>
          </div>

        </form>


        <!-- End content of modal -->

      </div>
    </div>
  </div>
</div>